:root{
  --chat-width: 440px;
  --border: #ccc;
  --accent: #0078D7;
  --accent-weak:#e8f1ff;
  --danger:#e53935; --ok:#2e7d32; --warn:#f57c00;
  --hint: rgba(0,120,215,.18);
}

/* Pasek kart */
#app_tabs{position:fixed;top:0;left:0;right:0;height:44px;background:#fff;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;z-index:12000;padding:0 8px}
#tabs_scroll{display:flex;gap:6px;overflow-x:auto;scrollbar-width:thin}
.tab_btn{border:1px solid var(--border);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.tab_btn.active{background:var(--accent-weak);border-color:var(--accent)}
#tab_add{border:1px dashed var(--border);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
body{margin:0;padding-top:44px;font-family:system-ui,Segoe UI,Arial,sans-serif}

/* Chmurka: pół-schowana przy krawędzi; hover wysuwa w stronę ekranu zgodnie z dock */
#chat_toggle{
  position:fixed;top:80px;left:-20px;width:56px;height:56px;border-radius:28px;
  background:var(--accent);color:#fff;font-size:22px;border:none;
  box-shadow:0 4px 12px rgba(0,0,0,.25);z-index:10010;display:grid;place-items:center;
  user-select:none;transition:transform .15s ease,opacity .15s ease;opacity:.92;cursor:default
}
#chat_toggle:hover{transform:translateX(10px);opacity:1}
.bubble-right:hover{transform:translateX(-10px)!important}
.bubble-top:hover{transform:translateY(10px)!important}
.bubble-bottom:hover{transform:translateY(-10px)!important}

/* Panel czatu: 4 doki */
#chat_panel{position:fixed;background:#fff;border:1px solid var(--border);display:flex;flex-direction:column;z-index:10000;overflow:hidden;box-shadow:4px 0 12px rgba(0,0,0,.12);transition:width .2s,height .2s,left .2s,right .2s,top .2s,bottom .2s}
.dock-left,.dock-right{top:44px;bottom:0;width:var(--chat-width)}
.dock-left{left:-460px;right:auto}
.dock-right{right:-460px;left:auto}
.dock-top,.dock-bottom{left:0;right:0;height:40vh;min-height:220px}
.dock-top{top:-50vh;bottom:auto}
.dock-bottom{bottom:-50vh;top:auto}
.open.dock-left{left:0}
.open.dock-right{right:0}
.open.dock-top{top:44px}
.open.dock-bottom{bottom:0}

/* Header/toolbar/status */
#chat_header{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:10px 12px;border-bottom:1px solid var(--border)}
.chat_title{font-weight:600}
.toolbar{display:flex;gap:8px;overflow:hidden}
.toolbar_btn{width:44px;height:44px;border-radius:10px;border:1px solid var(--border);background:#fff;font-size:18px;cursor:pointer;display:grid;place-items:center;transition:transform .12s,background .12s}
.toolbar_btn:hover{transform:scale(1.02);background:#fafafa}
.toolbar_btn.active{background:var(--accent-weak);border-color:var(--accent)}
#chat_panel:hover .toolbar{overflow:visible}

#chat_statusbar{display:flex;gap:8px;align-items:center;padding:6px 12px;border-bottom:1px dashed var(--border)}
.badge{font-size:12px;padding:2px 6px;border-radius:6px;border:1px solid var(--border)}
.badge.off{background:#fafafa;color:#666}
.badge.on{background:#e8f5e9;color:var(--ok);border-color:#c8e6c9}

/* Resizer */
#chat_resizer{position:absolute;background:#ddd;opacity:.9}
.dock-left #chat_resizer{right:-6px;top:0;width:10px;height:100%;cursor:ew-resize}
.dock-right #chat_resizer{left:-6px;top:0;width:10px;height:100%;cursor:ew-resize}
.dock-top #chat_resizer{left:0;bottom:-6px;width:100%;height:10px;cursor:ns-resize}
.dock-bottom #chat_resizer{left:0;top:-6px;width:100%;height:10px;cursor:ns-resize}

/* Dropzone/messages/input */
#chat_dropzone{padding:8px 12px;border-bottom:1px dashed var(--border);color:#666}
#chat_messages{flex:1;overflow-y:auto;padding:12px;background:#f9f9f9}
#chat_input_row{display:grid;grid-template-columns:1fr auto;gap:8px;padding:12px;border-top:1px solid var(--border)}
.input_actions{display:flex;gap:8px;align-items:center}
.input_actions>button{height:36px;padding:0 10px;border-radius:8px;border:1px solid var(--border);background:#fff;cursor:pointer}

.chat_box{display:flex;flex-direction:column;gap:8px}
.chat_msg{padding:10px 14px;border-radius:12px;max-width:80%;font-size:14px;line-height:1.4;white-space:pre-wrap;border:1px solid #ddd}
.chat_me{background:#d0e7ff;align-self:flex-end;border-color:#a0c4ff}
.chat_ai{background:#f0f0f0;align-self:flex-start;border-color:#ccc}

/* Panel problemów */
.status_panel{margin-top:10px;background:#f7f7f7;padding:10px;border-top:1px solid #ddd}
.status_panel .hidden{display:none}
.status_panel ul{list-style:none;padding:0;margin:8px 0 0 0}
.status_panel li{margin-bottom:6px;padding:6px 8px;border-radius:6px;background:#fff;border:1px solid var(--border)}
.status_panel li.big{border-left:4px solid var(--danger)}
.status_panel li.mid{border-left:4px solid var(--warn)}
.status_panel li.small{border-left:4px solid var(--accent)}

/* Dock hints */
.dock_hint{position:fixed;z-index:9990;pointer-events:none;background:var(--hint);display:none}
#dock_hint_left{left:0;top:44px;bottom:0;width:10px}
#dock_hint_right{right:0;top:44px;bottom:0;width:10px}
#dock_hint_top{top:44px;left:0;right:0;height:10px}
#dock_hint_bottom{bottom:0;left:0;right:0;height:10px}
.dock_hint.show{display:block}

/* Modal (karta) */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:20000;display:flex;align-items:center;justify-content:center}
.modal.hidden{display:none}
.modal_box{background:#fff;padding:16px;border-radius:10px;min-width:340px;border:1px solid var(--border);box-shadow:0 8px 22px rgba(0,0,0,.25)}
.modal_box h3{margin:0 0 8px 0}
.modal_box label{display:block;margin:8px 0}
.modal_actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}

/* Voice modal */
.voice_menu{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:20000;display:flex;align-items:center;justify-content:center}
.voice_menu.hidden{display:none}
.voice_menu_content{background:#fff;padding:16px;border-radius:10px;min-width:320px;border:1px solid var(--border);box-shadow:0 8px 22px rgba(0,0,0,.25)}
.voice_menu_content h3{margin-top:0}
.voice_menu_content label{display:block;margin:8px 0}
.voice_menu_actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
